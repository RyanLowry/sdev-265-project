"use strict";(self.webpackChunkrecipe_app=self.webpackChunkrecipe_app||[]).push([[639],{9639:(A,T,n)=>{n.r(T),n.d(T,{ChecklistModule:()=>u});var k=n(8583),I=n(2305);class x{constructor(m,s,i,c,h){this.id=m,this.recipeId=s,this.measurement=c,this.ingredient=i,this.isComplete=h}}var e=n(7716),Z=n(1312),y=n(7185),S=n(3738),o=n(3679),v=n(1095),t=n(7539),l=n(6627);function p(r,m){if(1&r){const s=e.EpF();e.TgZ(0,"div"),e.TgZ(1,"div",9),e.TgZ(2,"mat-checkbox",10),e.NdJ("change",function(c){const C=e.CHM(s).$implicit;return e.oxw().onCheck(c,C)}),e._uU(3),e.qZA(),e.TgZ(4,"button",11),e.NdJ("click",function(){const h=e.CHM(s).$implicit;return e.oxw().removeItem(h)}),e.TgZ(5,"mat-icon",12),e._uU(6,"delete"),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&r){const s=m.$implicit;e.xp6(2),e.Q6J("checked",s.isComplete||!1),e.xp6(1),e.AsE(" ",s.measurement," ",s.ingredient,""),e.xp6(2),e.Q6J("inline",!0)}}const d=[{path:"",component:(()=>{class r{constructor(s,i,c){var h,C;this._router=s,this.server=i,this.toastr=c,this.measurementItem="",this.ingredientsItem="",this.checklistItems=[],this.checklistId="",this._router&&(null===(h=this._router.getCurrentNavigation())||void 0===h?void 0:h.extras.state)&&(this.routeState=null===(C=this._router.getCurrentNavigation())||void 0===C?void 0:C.extras.state,this.routeState&&(this.checklistId=this.routeState.checklistId,localStorage.setItem("currentChecklist",this.checklistId))),localStorage.getItem("currentChecklist")&&(this.checklistId=localStorage.getItem("currentChecklist")||""),this.server.getChecklistItems({checklistId:this.checklistId}).then(L=>{var q;if("ok"===L.body.status)for(let f of L.body.checklistItems)null===(q=this.checklistItems)||void 0===q||q.push(new x(f.checklistItem_id,f.checklist_id,f.ingredient,f.measurement,f.is_complete))})}ngOnInit(){}removeItem(s){this.server.removeChecklistItems({id:s.id}).then(i=>{"ok"===i.body.status?(this.checklistItems.splice(this.checklistItems.indexOf(s),1),this.toastr.success("item removed")):this.toastr.error("something went wrong")})}returnToUser(){this._router.navigateByUrl("/user")}onCheck(s,i){this.checklistId&&this.server.updateChecklistItems({checklistItem:i.id,isComplete:s.checked}).then(c=>{"ok"===c.body.status&&(i.isComplete=s.checked)})}generateIngredients(){this.server.setChecklistItems({measurement:this.measurementItem,ingredient:this.ingredientsItem,checklistId:this.checklistId}).then(s=>{var i;if("ok"===s.body.status){let c=this.measurementItem,h=this.ingredientsItem;null===(i=this.checklistItems)||void 0===i||i.push(new x(s.body.itemId,parseInt(this.checklistId),c,h,!1))}})}}return r.\u0275fac=function(s){return new(s||r)(e.Y36(I.F0),e.Y36(Z.N),e.Y36(y._W))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-checklist"]],decls:19,vars:4,consts:[[1,"checklist-creator-container"],[2,"width","500px"],[1,"recipe-inputs",2,"margin","25px"],[1,"recipe-item",2,"margin","15px 0px"],["type","text",3,"ngModel","ngModelChange"],["mat-raised-button","","color","primary",2,"margin-top","15px","margin-bottom","15px",3,"disabled","click"],[4,"ngFor","ngForOf"],[2,"margin-top","30px"],["mat-raised-button","","color","primary",3,"click"],[2,"display","flex","margin-bottom","25px","justify-content","space-between","width","250px"],["color","primary",3,"checked","change"],["mat-raised-button","","color","secondary",2,"margin-left","50px","width","50px","height","40px",3,"click"],[3,"inline"]],template:function(s,i){1&s&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"mat-card"),e.TgZ(3,"div",2),e.TgZ(4,"div",3),e._uU(5,"Measurement:"),e.TgZ(6,"input",4),e.NdJ("ngModelChange",function(h){return i.measurementItem=h}),e.qZA(),e.qZA(),e.TgZ(7,"div",3),e._uU(8,"Ingredient:"),e.TgZ(9,"input",4),e.NdJ("ngModelChange",function(h){return i.ingredientsItem=h}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(10,"div"),e.TgZ(11,"button",5),e.NdJ("click",function(){return i.generateIngredients()}),e._uU(12,"Save Instruction"),e.qZA(),e.qZA(),e.TgZ(13,"h3"),e._uU(14,"Ingredient list:"),e.qZA(),e.YNc(15,p,7,4,"div",6),e.TgZ(16,"div",7),e.TgZ(17,"button",8),e.NdJ("click",function(){return i.returnToUser()}),e._uU(18," Return"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&s&&(e.xp6(6),e.Q6J("ngModel",i.measurementItem),e.xp6(3),e.Q6J("ngModel",i.ingredientsItem),e.xp6(2),e.Q6J("disabled",""===i.measurementItem||""===i.ingredientsItem),e.xp6(4),e.Q6J("ngForOf",i.checklistItems))},directives:[S.a8,o.Fj,o.JJ,o.On,v.lW,k.sg,t.oG,l.Hw],styles:[".checklist-creator-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;height:100vh}.recipe-inputs[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{width:250px;display:flex;justify-content:space-between}"]}),r})()}];let a=(()=>{class r{}return r.\u0275fac=function(s){return new(s||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[[I.Bz.forChild(d)],I.Bz]}),r})(),u=(()=>{class r{}return r.\u0275fac=function(s){return new(s||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[[k.ez,a]]}),r})()},1312:(A,T,n)=>{function k(o,v,t,l,p,g,d){try{var a=o[g](d),u=a.value}catch(r){return void t(r)}a.done?v(u):Promise.resolve(u).then(l,p)}n.d(T,{N:()=>S});var x=n(2340),e=n(7716),Z=n(1841),y=n(7185);let S=(()=>{class o{constructor(t,l){this.http=t,this.toastr=l,this.serverLocation=x.N.serverUrl||""}request(t,l,p){var g=this;return function(o){return function(){var v=this,t=arguments;return new Promise(function(l,p){var g=o.apply(v,t);function d(u){k(g,l,p,d,a,"next",u)}function a(u){k(g,l,p,d,a,"throw",u)}d(void 0)})}}(function*(){const d=g.http.request(t,l,{withCredentials:!0,body:p,responseType:"json",observe:"response"});return new Promise((a,u)=>{d.subscribe(a,u)}).catch(a=>{g.toastr.error(a.error.status)})})()}createAccount(t){return this.request("POST",`${this.serverLocation}/register`,t)}loginAccount(t){return this.request("POST",`${this.serverLocation}/auth`,t)}createRecipe(t){return this.request("POST",`${this.serverLocation}/addRecipe`,t)}createChecklist(t){return this.request("POST",`${this.serverLocation}/addChecklist`,t)}getRecipes(t){return this.request("POST",`${this.serverLocation}/userRecipe`,t)}getChecklist(t){return this.request("POST",`${this.serverLocation}/userChecklist`,t)}getChecklistItems(t){return this.request("POST",`${this.serverLocation}/getChecklistItem`,t)}getShared(t){return this.request("POST",`${this.serverLocation}/userShared`,t)}setRecipeItems(t){return this.request("POST",`${this.serverLocation}/recipeItem`,t)}setChecklistItems(t){return this.request("POST",`${this.serverLocation}/addChecklistItem`,t)}updateChecklistItems(t){return this.request("PUT",`${this.serverLocation}/addChecklistItem`,t)}getRecipeItems(t){return this.request("POST",`${this.serverLocation}/recipeItems`,t)}updateRecipeItems(t){return this.request("PUT",`${this.serverLocation}/recipeItem`,t)}updateRecipeInfo(t){return this.request("PUT",`${this.serverLocation}/updateRecipe`,t)}shareRecipe(t){return this.request("POST",`${this.serverLocation}/shareRecipe`,t)}logoutAccount(t){return this.request("POST",`${this.serverLocation}/logout`,t)}removeChecklistItems(t){return this.request("DELETE",`${this.serverLocation}/removeChecklistItem`,t)}removeRecipe(t){return this.request("DELETE",`${this.serverLocation}/removeRecipe`,t)}removeChecklist(t){return this.request("DELETE",`${this.serverLocation}/removeChecklist`,t)}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(Z.eN),e.LFG(y._W))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})()}}]);