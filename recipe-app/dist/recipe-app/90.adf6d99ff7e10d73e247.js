"use strict";(self.webpackChunkrecipe_app=self.webpackChunkrecipe_app||[]).push([[90],{1090:(A,h,o)=>{o.r(h),o.d(h,{RecipeBuilderModule:()=>S});var u=o(8583);class l{constructor(c,t,n,r,s){this.id=c,this.recipeId=t,this.measurement=n,this.ingredient=r,this.preparation=s}}var e=o(7716),g=o(2305),C=o(1312),I=o(3738),m=o(3679),f=o(1095);const Z=function(i){return{"selected-item":i}};function _(i,c){if(1&i){const t=e.EpF();e.TgZ(0,"div"),e.TgZ(1,"div",12),e.NdJ("click",function(){const s=e.CHM(t).$implicit;return e.oxw().changeItem(s)}),e._uU(2),e.qZA(),e.qZA()}if(2&i){const t=c.$implicit,n=c.index,r=e.oxw();e.xp6(1),e.Q6J("ngClass",e.VKq(5,Z,r.selectedItem==t)),e.xp6(1),e.HOy(" ",n+1,": ",t.measurement," ",t.ingredient," ",t.preparation,"")}}let v=(()=>{class i{constructor(t,n){var r,s;this._router=t,this.server=n,this.measurementItem="",this.ingredientsItem="",this.preparedItem="",this.steps=[],this.recipeId="",this._router&&(null===(r=this._router.getCurrentNavigation())||void 0===r?void 0:r.extras.state)&&(this.routeState=null===(s=this._router.getCurrentNavigation())||void 0===s?void 0:s.extras.state,this.routeState&&(this.recipeId=this.routeState.recipeId,localStorage.setItem("currentRecipe",this.recipeId),this.recipeInstructions=this.routeState.instructions||"",localStorage.setItem("currentInstructions",this.recipeInstructions))),localStorage.getItem("currentRecipe")&&(this.recipeId=localStorage.getItem("currentRecipe")||""),this.recipeInstructions=(localStorage.getItem("currentInstructions")||""!=this.recipeInstructions)&&localStorage.getItem("currentInstructions")||"",this.server.getRecipeItems({recipeId:this.recipeId}).then(p=>{var d;if("ok"===p.body.status)for(let a of p.body.steps)null===(d=this.steps)||void 0===d||d.push(new l(a.recipeItem_id,a.recipeId,a.measurement,a.ingredient,a.preparation))})}ngOnInit(){}updateRecipeInformation(){this.server.updateRecipeInfo({recipeId:this.recipeId,instructions:this.recipeInstructions,itemLength:this.steps.length}).then(t=>{"ok"===t.body.status&&this._router.navigateByUrl("/user")})}returnToUser(){this._router.navigateByUrl("/user")}changeItem(t){this.selectedItem===t?(this.selectedItem=void 0,this.measurementItem="",this.ingredientsItem="",this.preparedItem=""):(this.selectedItem=t,this.measurementItem=t.measurement,this.ingredientsItem=t.ingredient,this.preparedItem=t.preparation)}generateIngredients(){if(new l(0,0,"","",""),this.selectedItem){let n=this.steps.indexOf(this.selectedItem);this.server.updateRecipeItems({itemId:this.steps[n].id,measurement:this.measurementItem,preparation:this.preparedItem,ingredient:this.ingredientsItem}).then(r=>{if("ok"===r.body.status){let s=this.measurementItem,p=this.preparedItem,d=this.ingredientsItem;this.steps[n]=new l(this.steps[n].id,parseInt(this.recipeId),s,d,p)}})}else this.server.setRecipeItems({measurement:this.measurementItem,preparation:this.preparedItem,ingredient:this.ingredientsItem,recipeId:this.recipeId}).then(n=>{var r;if("ok"===n.body.status){let s=this.measurementItem,p=this.preparedItem,d=this.ingredientsItem;null===(r=this.steps)||void 0===r||r.push(new l(n.body.itemId,parseInt(this.recipeId),s,d,p))}});this.selectedItem=void 0}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(g.F0),e.Y36(C.N))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-recipe-selector"]],decls:28,vars:6,consts:[[1,"recipe-creator-container"],[2,"width","500px"],[1,"recipe-inputs"],[1,"recipe-item"],["type","text","name","measurement",3,"ngModel","ngModelChange"],["type","text",3,"ngModel","ngModelChange"],["mat-raised-button","","color","primary",2,"margin-top","15px","margin-bottom","15px",3,"disabled","click"],[4,"ngFor","ngForOf"],[1,"instruction-holder"],["rows","10",2,"width","450px",3,"ngModel","ngModelChange"],["mat-raised-button","","color","primary",3,"click"],["mat-raised-button","","color","secondary",3,"click"],[1,"ing-item",3,"ngClass","click"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"mat-card"),e.TgZ(3,"div",2),e.TgZ(4,"div",3),e._uU(5,"Measurement:"),e.TgZ(6,"input",4),e.NdJ("ngModelChange",function(s){return n.measurementItem=s}),e.qZA(),e.qZA(),e.TgZ(7,"div",3),e._uU(8,"Ingredient:"),e.TgZ(9,"input",5),e.NdJ("ngModelChange",function(s){return n.ingredientsItem=s}),e.qZA(),e.qZA(),e.TgZ(10,"div",3),e._uU(11,"Prepared:"),e.TgZ(12,"input",5),e.NdJ("ngModelChange",function(s){return n.preparedItem=s}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(13,"div"),e.TgZ(14,"button",6),e.NdJ("click",function(){return n.generateIngredients()}),e._uU(15,"Save Instruction"),e.qZA(),e.qZA(),e.TgZ(16,"h3"),e._uU(17,"Ingredient list:"),e.qZA(),e.YNc(18,_,3,7,"div",7),e.TgZ(19,"div",8),e.TgZ(20,"h3"),e._uU(21,"Instructions:"),e.qZA(),e.TgZ(22,"textarea",9),e.NdJ("ngModelChange",function(s){return n.recipeInstructions=s}),e.qZA(),e.qZA(),e.TgZ(23,"div"),e.TgZ(24,"button",10),e.NdJ("click",function(){return n.updateRecipeInformation()}),e._uU(25,"Submit item"),e.qZA(),e.TgZ(26,"button",11),e.NdJ("click",function(){return n.returnToUser()}),e._uU(27,"Cancel"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(6),e.Q6J("ngModel",n.measurementItem),e.xp6(3),e.Q6J("ngModel",n.ingredientsItem),e.xp6(3),e.Q6J("ngModel",n.preparedItem),e.xp6(2),e.Q6J("disabled",""===n.measurementItem||""===n.ingredientsItem),e.xp6(4),e.Q6J("ngForOf",n.steps),e.xp6(4),e.Q6J("ngModel",n.recipeInstructions))},directives:[I.a8,m.Fj,m.JJ,m.On,f.lW,u.sg,u.mk],styles:[".ing-item[_ngcontent-%COMP%]:hover{background-color:gray}.ing-item[_ngcontent-%COMP%]{width:100%}.selected-item[_ngcontent-%COMP%]{background-color:gray}.recipe-creator-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;height:100vh}.recipe-item[_ngcontent-%COMP%]{display:flex;margin-top:20px;margin-bottom:20px}.instruction-holder[_ngcontent-%COMP%]{margin-top:25px}.recipe-inputs[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{width:250px;display:flex;justify-content:space-between}"]}),i})();var M=o(5939),R=o(8756);const T=[{path:"",component:v}];let y=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[[g.Bz.forChild(T)],g.Bz]}),i})(),S=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i,bootstrap:[v]}),i.\u0275inj=e.cJS({imports:[[u.ez,M.Nh,f.ot,m.u5,R.Is,I.QW,y]]}),i})()}}]);