"use strict";(self.webpackChunkrecipe_app=self.webpackChunkrecipe_app||[]).push([[639],{9639:(q,T,n)=>{n.r(T),n.d(T,{ChecklistModule:()=>a});var C=n(8583),I=n(2305);class x{constructor(l,r,i,o,c){this.id=l,this.recipeId=r,this.measurement=o,this.ingredient=i,this.isComplete=c}}var e=n(7716),Z=n(1312),y=n(7185),f=n(3679),h=n(1095),p=n(7539),t=n(6627);function u(s,l){if(1&s){const r=e.EpF();e.TgZ(0,"div"),e.TgZ(1,"div",8),e.TgZ(2,"mat-checkbox",9),e.NdJ("change",function(o){const v=e.CHM(r).$implicit;return e.oxw().onCheck(o,v)}),e._uU(3),e.qZA(),e.TgZ(4,"button",10),e.TgZ(5,"mat-icon",11),e.NdJ("click",function(){const c=e.CHM(r).$implicit;return e.oxw().removeItem(c)}),e._uU(6,"delete"),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&s){const r=l.$implicit;e.xp6(2),e.Q6J("checked",r.isComplete||!1),e.xp6(1),e.AsE(" ",r.measurement," ",r.ingredient,""),e.xp6(2),e.Q6J("inline",!0)}}const m=[{path:"",component:(()=>{class s{constructor(r,i,o){var c,v;this._router=r,this.server=i,this.toastr=o,this.measurementItem="",this.ingredientsItem="",this.checklistItems=[],this.checklistId="",this._router&&(null===(c=this._router.getCurrentNavigation())||void 0===c?void 0:c.extras.state)&&(this.routeState=null===(v=this._router.getCurrentNavigation())||void 0===v?void 0:v.extras.state,this.routeState&&(this.checklistId=this.routeState.checklistId,localStorage.setItem("currentChecklist",this.checklistId))),localStorage.getItem("currentChecklist")&&(this.checklistId=localStorage.getItem("currentChecklist")||""),this.server.getChecklistItems({checklistId:this.checklistId}).then(S=>{var L;if(console.log(this.checklistId),"ok"===S.body.status)for(let k of S.body.checklistItems)console.log(k),null===(L=this.checklistItems)||void 0===L||L.push(new x(k.checklistItem_id,k.checklist_id,k.ingredient,k.measurement,k.is_complete))})}ngOnInit(){}removeItem(r){this.server.removeChecklistItems({id:r.id}).then(i=>{"ok"===i.body.status?(this.checklistItems.splice(this.checklistItems.indexOf(r),1),this.toastr.success("item removed")):this.toastr.error("something went wrong")})}returnToUser(){this._router.navigateByUrl("/user")}onCheck(r,i){console.log(i),this.checklistId&&this.server.updateChecklistItems({checklistItem:i.id,isComplete:r.checked}).then(o=>{console.log(o),"ok"===o.body.status&&(i.isComplete=r.checked)})}generateIngredients(){console.log(this.measurementItem),this.server.setChecklistItems({measurement:this.measurementItem,ingredient:this.ingredientsItem,checklistId:this.checklistId}).then(r=>{var i;if("ok"===r.body.status){let o=this.measurementItem,c=this.ingredientsItem;null===(i=this.checklistItems)||void 0===i||i.push(new x(r.body.itemId,parseInt(this.checklistId),o,c,!1))}})}}return s.\u0275fac=function(r){return new(r||s)(e.Y36(I.F0),e.Y36(Z.N),e.Y36(y._W))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-checklist"]],decls:17,vars:4,consts:[[1,"checklist-creator-container"],[2,"margin","25px"],[1,"recipe-item",2,"margin","15px 0px"],["type","text",3,"ngModel","ngModelChange"],["mat-raised-button","","color","primary",2,"margin-top","15px","margin-bottom","15px",3,"disabled","click"],[4,"ngFor","ngForOf"],[2,"margin-top","30px"],["mat-raised-button","","color","primary",3,"click"],[2,"display","flex","margin-bottom","25px","justify-content","space-between"],["color","primary",3,"checked","change"],["mat-raised-button","","color","secondary",2,"margin-left","50px","width","50px","height","40px"],[3,"inline","click"]],template:function(r,i){1&r&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e._uU(3,"Measurement:"),e.TgZ(4,"input",3),e.NdJ("ngModelChange",function(c){return i.measurementItem=c}),e.qZA(),e.qZA(),e.TgZ(5,"div",2),e._uU(6,"Ingredient:"),e.TgZ(7,"input",3),e.NdJ("ngModelChange",function(c){return i.ingredientsItem=c}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(8,"div"),e.TgZ(9,"button",4),e.NdJ("click",function(){return i.generateIngredients()}),e._uU(10,"Save Instruction"),e.qZA(),e.qZA(),e.TgZ(11,"h3"),e._uU(12,"Ingredient list:"),e.qZA(),e.YNc(13,u,7,4,"div",5),e.TgZ(14,"div",6),e.TgZ(15,"button",7),e.NdJ("click",function(){return i.returnToUser()}),e._uU(16," Return"),e.qZA(),e.qZA(),e.qZA()),2&r&&(e.xp6(4),e.Q6J("ngModel",i.measurementItem),e.xp6(3),e.Q6J("ngModel",i.ingredientsItem),e.xp6(2),e.Q6J("disabled",""===i.measurementItem||""===i.ingredientsItem),e.xp6(4),e.Q6J("ngForOf",i.checklistItems))},directives:[f.Fj,f.JJ,f.On,h.lW,C.sg,p.oG,t.Hw],styles:[".checklist-creator-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;width:480px}"]}),s})()}];let d=(()=>{class s{}return s.\u0275fac=function(r){return new(r||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[[I.Bz.forChild(m)],I.Bz]}),s})(),a=(()=>{class s{}return s.\u0275fac=function(r){return new(r||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[[C.ez,d]]}),s})()},1312:(q,T,n)=>{function C(h,p,t,u,g,m,d){try{var a=h[m](d),s=a.value}catch(l){return void t(l)}a.done?p(s):Promise.resolve(s).then(u,g)}n.d(T,{N:()=>f});var x=n(2340),e=n(7716),Z=n(1841),y=n(7185);let f=(()=>{class h{constructor(t,u){this.http=t,this.toastr=u,this.serverLocation=x.N.serverUrl||""}request(t,u,g){var m=this;return function(h){return function(){var p=this,t=arguments;return new Promise(function(u,g){var m=h.apply(p,t);function d(s){C(m,u,g,d,a,"next",s)}function a(s){C(m,u,g,d,a,"throw",s)}d(void 0)})}}(function*(){const d=m.http.request(t,u,{withCredentials:!0,body:g,responseType:"json",observe:"response"});return new Promise((a,s)=>{d.subscribe(a,s)}).catch(a=>{m.toastr.error(a.error.status)})})()}createAccount(t){return this.request("POST",`${this.serverLocation}/register`,t)}loginAccount(t){return this.request("POST",`${this.serverLocation}/auth`,t)}createRecipe(t){return this.request("POST",`${this.serverLocation}/addRecipe`,t)}createChecklist(t){return this.request("POST",`${this.serverLocation}/addChecklist`,t)}getRecipes(t){return this.request("POST",`${this.serverLocation}/userRecipe`,t)}getChecklist(t){return this.request("POST",`${this.serverLocation}/userChecklist`,t)}getChecklistItems(t){return this.request("POST",`${this.serverLocation}/getChecklistItem`,t)}getShared(t){return this.request("POST",`${this.serverLocation}/userShared`,t)}setRecipeItems(t){return this.request("POST",`${this.serverLocation}/recipeItem`,t)}setChecklistItems(t){return this.request("POST",`${this.serverLocation}/addChecklistItem`,t)}updateChecklistItems(t){return this.request("PUT",`${this.serverLocation}/addChecklistItem`,t)}getRecipeItems(t){return this.request("POST",`${this.serverLocation}/recipeItems`,t)}updateRecipeItems(t){return this.request("PUT",`${this.serverLocation}/recipeItem`,t)}updateRecipeInfo(t){return this.request("PUT",`${this.serverLocation}/updateRecipe`,t)}shareRecipe(t){return this.request("POST",`${this.serverLocation}/shareRecipe`,t)}removeChecklistItems(t){return this.request("DELETE",`${this.serverLocation}/removeChecklistItem`,t)}removeRecipe(t){return this.request("DELETE",`${this.serverLocation}/removeRecipe`,t)}removeChecklist(t){return this.request("DELETE",`${this.serverLocation}/removeChecklist`,t)}}return h.\u0275fac=function(t){return new(t||h)(e.LFG(Z.eN),e.LFG(y._W))},h.\u0275prov=e.Yz7({token:h,factory:h.\u0275fac,providedIn:"root"}),h})()}}]);